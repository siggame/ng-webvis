<!-- Playback controls -->
<div class="playback-container" ng-controller="PlaybackCtrl as playback">
  <div class="playback-controls well well-sm">
    <div class="row" style="padding-left:10px;padding-right:10px">
      <div class="col-xs-12">
        <slider max-value="playback.maxTurn" current-value="playback.currentTurn" live-value="playback.currentTurn"></slider>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 playback-controls">
        <div class="btn-group pull-left">
          <!-- Step back button -->
          <button class="btn btn-default" ng-click="playback.stepBack()">
            <i class="fa fa-backward"></i>
          </button>

          <!-- Play/pause buttons -->
          <button class="btn btn-default" ng-click="playback.playPause()">
            <span ng-hide="playback.isPlaying()"><i class="fa fa-play"></i></span>
            <span ng-show="playback.isPlaying()"><i class="fa fa-pause"></i></span>
          </button>

          <!-- Step forward button -->
          <button class="btn btn-default" ng-click="playback.stepForward()">
            <i class="fa fa-forward"></i>
          </button>
        </div>

        <!-- Fullscreen button -->
        <div class="pull-right playback-controls-right">
          <p>Turn:</p>
          <div class="btn btn-default slider-value disabled" style="margin-right:5px;">
              {{ playback.currentTurn || 0 }}
          </div>

          <p>Time:</p>
          <slider max-value="10" current-value="playback.timeDt" live-value="playback.timeDt"></slider>
          <p style="width:40px;">x{{playback.timeDt/4}}</p>
          <script id="time-slide-handler">
              var div = $(document.getElementById("time-slide-handler")).parent();
              var pt = div.find("p").next().next();
              pt.ready(function(){div.find("slider").css("width", div.width() - 100);});
          </script>

          <button class="btn btn-default" ng-click="playback.fullscreen()">
              <i class="fa fa-desktop"></i>
          </button>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
    $(document).ready( function() {
        var resizeStage = function() {
            console.log("resizing things");
            var totalheight = $('#fullscreen-container').innerHeight();
            var playbackHeight = $('#playback-container').height();

            console.log(totalheight + ' ' + playbackHeight);

            $('#stage-container').height(totalheight - playbackHeight);
        };

        $(window).resize(resizeStage);
        resizeStage();
    });
</script>
